{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\Github\\\\spring\\\\lms_app\\\\src\\\\Components\\\\Unity\\\\UnityProject.js\",\n  _s = $RefreshSig$();\n// import { Unity, useUnityContext } from \"react-unity-webgl\";\n// import { useState, useEffect } from \"react\";\n// import styled from \"styled-components\";\n\n// // 게임을 로드할 화면을 만듬\n// const Container = styled.div`\n//   width: 1344px;\n//   height: 756px;\n//   margin: auto;\n//   border: 1px solid gray;\n// `;\n\n// export function UnityProject() {\n//   // const { unityProvider } = useUnityContext({\n//   //     loaderUrl: \"build/myunityapp.loader.js\",\n//   //     dataUrl: \"build/myunityapp.data\",\n//   //     frameworkUrl: \"build/myunityapp.framework.js\",\n//   //     codeUrl: \"build/myunityapp.wasm\",\n//   // });\n\n//   // const [playingGame, setPlayingGame] = useState(false);\n//   const [playingGame, setPlayingGame] = useState(true);\n\n//   const [isGameOver, setIsGameOver] = useState(false);\n//   const [userName, setUserName] = useState();\n//   const [score, setScore] = useState();\n\n//   // React 에서 Unity 로 sendMessage 를 통해 전달하기\n//   const { unityProvider, sendMessage, addEventListener, removeEventListener } =\n//     useUnityContext({\n//       loaderUrl: \"build/Build.loader.js\",\n//       dataUrl: \"build/Build.data\",\n//       frameworkUrl: \"build/Build.framework.js\",\n//       codeUrl: \"build/Build.wasm\",\n//     });\n\n//   function handleGameOver(userName, score) {\n//     setIsGameOver(true);\n//     setUserName(userName);\n//     setScore(score);\n//   }\n\n//   useEffect(() => {\n//     addEventListener(\"GameOver\", handleGameOver);\n//     return () => {\n//       removeEventListener(\"GameOver\", handleGameOver);\n//     };\n//   }, []);\n\n//   return (\n//     <>\n//       <h1>UnityProject Game</h1>\n//       <button onClick={() => setPlayingGame(true)}>Start Game</button>\n//       <button onClick={() => sendMessage(\"Player\", \"Attack\")}>Attack</button>\n//       <Container>\n//         {playingGame ? (\n//           <Unity\n//             unityProvider={unityProvider}\n//             style={{\n//               width: \"100%\",\n//               height: \"100%\",\n//             }}\n//           />\n//         ) : null}\n//       </Container>\n\n//       {/* // Unity 에서 게임오버 메시지를 받으면 출력후 종료 */}\n//       {isGameOver === true && (\n//         <p>{`Game Over ${userName}! You've scored ${score} points.`}</p>\n//       )}\n//     </>\n//   );\n// }\nimport { Unity, useUnityContext } from \"react-unity-webgl\";\nimport { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  width: 1344px;\n  height: 756px;\n  margin: auto;\n  border: 1px solid gray;\n`;\n_c = Container;\nexport function UnityProject() {\n  _s();\n  const [playingGame, setPlayingGame] = useState(true);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [userName, setUserName] = useState();\n  const [score, setScore] = useState();\n  const {\n    unityProvider,\n    sendMessage,\n    addEventListener,\n    removeEventListener\n  } = useUnityContext({\n    loaderUrl: \"build/Build.loader.js\",\n    dataUrl: \"build/Build.data\",\n    frameworkUrl: \"build/Build.framework.js\",\n    codeUrl: \"build/Build.wasm\"\n  });\n  function NotifySceneChanged(sceneName) {\n    console.log(`NotifySceneChanged called with sceneName: ${sceneName}`);\n    localStorage.setItem(\"currentScene\", sceneName);\n    window.dispatchEvent(new CustomEvent(\"sceneChanged\", {\n      detail: {\n        sceneName\n      }\n    }));\n  }\n  useEffect(() => {\n    NotifySceneChanged(sceneName);\n  }, []);\n  function handleGameOver(userName, score) {\n    setIsGameOver(true);\n    setUserName(userName);\n    setScore(score);\n  }\n  useEffect(() => {\n    addEventListener(\"GameOver\", handleGameOver);\n    return () => {\n      removeEventListener(\"GameOver\", handleGameOver);\n    };\n  }, [addEventListener, removeEventListener]);\n  useEffect(() => {\n    // 저장된 씬 상태 복원하기\n    const savedScene = localStorage.getItem(\"currentScene\");\n    if (savedScene) {\n      sendMessage(\"SceneManager\", \"LoadScene\", savedScene);\n    }\n  }, [sendMessage]);\n  useEffect(() => {\n    // 씬 상태 변경 이벤트를 처리\n    const handleSceneChange = event => {\n      const {\n        sceneName\n      } = event.detail;\n      localStorage.setItem(\"currentScene\", sceneName);\n      // 필요한 경우 추가 작업 수행\n    };\n    window.addEventListener(\"sceneChanged\", handleSceneChange);\n    return () => {\n      window.removeEventListener(\"sceneChanged\", handleSceneChange);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"UnityProject Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setPlayingGame(true),\n      children: \"Start Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => sendMessage(\"Player\", \"Attack\"),\n      children: \"Attack\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: playingGame ? /*#__PURE__*/_jsxDEV(Unity, {\n        unityProvider: unityProvider,\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), isGameOver && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: `Game Over ${userName}! You've scored ${score} points.`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(UnityProject, \"/coIG2CWGl9i8MhIyqb1+bUKLtQ=\", false, function () {\n  return [useUnityContext];\n});\n_c2 = UnityProject;\nvar _c, _c2;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"UnityProject\");","map":{"version":3,"names":["Unity","useUnityContext","useState","useEffect","styled","jsxDEV","_jsxDEV","Fragment","_Fragment","Container","div","_c","UnityProject","_s","playingGame","setPlayingGame","isGameOver","setIsGameOver","userName","setUserName","score","setScore","unityProvider","sendMessage","addEventListener","removeEventListener","loaderUrl","dataUrl","frameworkUrl","codeUrl","NotifySceneChanged","sceneName","console","log","localStorage","setItem","window","dispatchEvent","CustomEvent","detail","handleGameOver","savedScene","getItem","handleSceneChange","event","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","width","height","_c2","$RefreshReg$"],"sources":["C:/Users/admin/Documents/Github/spring/lms_app/src/Components/Unity/UnityProject.js"],"sourcesContent":["// import { Unity, useUnityContext } from \"react-unity-webgl\";\r\n// import { useState, useEffect } from \"react\";\r\n// import styled from \"styled-components\";\r\n\r\n// // 게임을 로드할 화면을 만듬\r\n// const Container = styled.div`\r\n//   width: 1344px;\r\n//   height: 756px;\r\n//   margin: auto;\r\n//   border: 1px solid gray;\r\n// `;\r\n\r\n// export function UnityProject() {\r\n//   // const { unityProvider } = useUnityContext({\r\n//   //     loaderUrl: \"build/myunityapp.loader.js\",\r\n//   //     dataUrl: \"build/myunityapp.data\",\r\n//   //     frameworkUrl: \"build/myunityapp.framework.js\",\r\n//   //     codeUrl: \"build/myunityapp.wasm\",\r\n//   // });\r\n\r\n//   // const [playingGame, setPlayingGame] = useState(false);\r\n//   const [playingGame, setPlayingGame] = useState(true);\r\n\r\n//   const [isGameOver, setIsGameOver] = useState(false);\r\n//   const [userName, setUserName] = useState();\r\n//   const [score, setScore] = useState();\r\n\r\n//   // React 에서 Unity 로 sendMessage 를 통해 전달하기\r\n//   const { unityProvider, sendMessage, addEventListener, removeEventListener } =\r\n//     useUnityContext({\r\n//       loaderUrl: \"build/Build.loader.js\",\r\n//       dataUrl: \"build/Build.data\",\r\n//       frameworkUrl: \"build/Build.framework.js\",\r\n//       codeUrl: \"build/Build.wasm\",\r\n//     });\r\n\r\n//   function handleGameOver(userName, score) {\r\n//     setIsGameOver(true);\r\n//     setUserName(userName);\r\n//     setScore(score);\r\n//   }\r\n\r\n//   useEffect(() => {\r\n//     addEventListener(\"GameOver\", handleGameOver);\r\n//     return () => {\r\n//       removeEventListener(\"GameOver\", handleGameOver);\r\n//     };\r\n//   }, []);\r\n\r\n//   return (\r\n//     <>\r\n//       <h1>UnityProject Game</h1>\r\n//       <button onClick={() => setPlayingGame(true)}>Start Game</button>\r\n//       <button onClick={() => sendMessage(\"Player\", \"Attack\")}>Attack</button>\r\n//       <Container>\r\n//         {playingGame ? (\r\n//           <Unity\r\n//             unityProvider={unityProvider}\r\n//             style={{\r\n//               width: \"100%\",\r\n//               height: \"100%\",\r\n//             }}\r\n//           />\r\n//         ) : null}\r\n//       </Container>\r\n\r\n//       {/* // Unity 에서 게임오버 메시지를 받으면 출력후 종료 */}\r\n//       {isGameOver === true && (\r\n//         <p>{`Game Over ${userName}! You've scored ${score} points.`}</p>\r\n//       )}\r\n//     </>\r\n//   );\r\n// }\r\nimport { Unity, useUnityContext } from \"react-unity-webgl\";\r\nimport { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  width: 1344px;\r\n  height: 756px;\r\n  margin: auto;\r\n  border: 1px solid gray;\r\n`;\r\n\r\nexport function UnityProject() {\r\n  const [playingGame, setPlayingGame] = useState(true);\r\n  const [isGameOver, setIsGameOver] = useState(false);\r\n  const [userName, setUserName] = useState();\r\n  const [score, setScore] = useState();\r\n\r\n  const { unityProvider, sendMessage, addEventListener, removeEventListener } =\r\n    useUnityContext({\r\n      loaderUrl: \"build/Build.loader.js\",\r\n      dataUrl: \"build/Build.data\",\r\n      frameworkUrl: \"build/Build.framework.js\",\r\n      codeUrl: \"build/Build.wasm\",\r\n    });\r\n  function NotifySceneChanged(sceneName) {\r\n    console.log(`NotifySceneChanged called with sceneName: ${sceneName}`);\r\n    localStorage.setItem(\"currentScene\", sceneName);\r\n    window.dispatchEvent(\r\n      new CustomEvent(\"sceneChanged\", { detail: { sceneName } })\r\n    );\r\n  }\r\n  useEffect(() => {\r\n    NotifySceneChanged(sceneName);\r\n  }, []);\r\n\r\n  function handleGameOver(userName, score) {\r\n    setIsGameOver(true);\r\n    setUserName(userName);\r\n    setScore(score);\r\n  }\r\n\r\n  useEffect(() => {\r\n    addEventListener(\"GameOver\", handleGameOver);\r\n    return () => {\r\n      removeEventListener(\"GameOver\", handleGameOver);\r\n    };\r\n  }, [addEventListener, removeEventListener]);\r\n\r\n  useEffect(() => {\r\n    // 저장된 씬 상태 복원하기\r\n    const savedScene = localStorage.getItem(\"currentScene\");\r\n    if (savedScene) {\r\n      sendMessage(\"SceneManager\", \"LoadScene\", savedScene);\r\n    }\r\n  }, [sendMessage]);\r\n\r\n  useEffect(() => {\r\n    // 씬 상태 변경 이벤트를 처리\r\n    const handleSceneChange = (event) => {\r\n      const { sceneName } = event.detail;\r\n      localStorage.setItem(\"currentScene\", sceneName);\r\n      // 필요한 경우 추가 작업 수행\r\n    };\r\n\r\n    window.addEventListener(\"sceneChanged\", handleSceneChange);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"sceneChanged\", handleSceneChange);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>UnityProject Game</h1>\r\n      <button onClick={() => setPlayingGame(true)}>Start Game</button>\r\n      <button onClick={() => sendMessage(\"Player\", \"Attack\")}>Attack</button>\r\n      <Container>\r\n        {playingGame ? (\r\n          <Unity\r\n            unityProvider={unityProvider}\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n            }}\r\n          />\r\n        ) : null}\r\n      </Container>\r\n\r\n      {isGameOver && (\r\n        <p>{`Game Over ${userName}! You've scored ${score} points.`}</p>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}